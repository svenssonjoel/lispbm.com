<HTML lang="en-US">

<HEAD>  
  
  <meta charset="UTF-8">
  <meta name="description" content="LispBM Gallery - Showcase of LispBM projects, creations, and community contributions. Explore what people have built with LispBM, the Lisp for microcontrollers.">
  <meta name="keywords" content="lispbm gallery, lispbm projects, lispbm showcase, lisp microcontroller projects, embedded lisp examples, lispbm community, lispbm creations, vesc lisp, lisp vesc">
  <meta name="author" content="Bo Joel Svensson">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- SEO Meta Tags -->
  <link rel="canonical" href="https://www.lispbm.com/gallery.html">
  <meta name="robots" content="index, follow">
  
  <!-- Open Graph Meta Tags -->
  <meta property="og:title" content="LispBM Gallery - Community Projects and Creations">
  <meta property="og:description" content="Showcase of LispBM projects, creations, and community contributions. Explore what people have built with LispBM, the Lisp for microcontrollers.">
  <meta property="og:image" content="https://www.lispbm.com/images/lispbm_llama_small.png">
  <meta property="og:url" content="https://www.lispbm.com/gallery.html">
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="LispBM">
  
  <!-- Twitter Card Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="LispBM Gallery - Community Projects and Creations">
  <meta name="twitter:description" content="Showcase of LispBM projects, creations, and community contributions. Explore what people have built with LispBM, the Lisp for microcontrollers.">
  <meta name="twitter:image" content="https://www.lispbm.com/images/lispbm_llama_small.png">

  <link rel="apple-touch-icon" sizes="180x180" href="./ico/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="./ico/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="./ico/favicon-16x16.png">
  <link rel="shortcut icon" href="./ico/favicon.ico">
  <link rel="icon" type="image/vnd.microsoft.icon" href="./ico/favicon.ico">
  <link rel="icon" type="image/x-icon" href="./ico/favicon.ico">
  <link rel="icon" href="./ico/favicon.ico">
  <link rel="manifest" href="./ico/site.webmanifest">
  
  <link rel="stylesheet" href="styles.css">
  
</HEAD> 

<TITLE>LispBM Gallery - Community Projects and Creations</TITLE>

<style type="text/css">
  /* Gallery-specific styles */

  .gallery-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 30px;
      padding: 20px 0;
  }

  .gallery-item {
      background: white;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      cursor: pointer;
  }

  .gallery-item:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
  }

  /* Modal overlay styles */
  .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease, visibility 0.3s ease;
  }

  .modal-overlay.active {
      opacity: 1;
      visibility: visible;
  }

  .modal-content {
      max-width: 90vw;
      max-height: 90vh;
      background: white;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
      transform: scale(0.7);
      transition: transform 0.3s ease;
  }

  .modal-overlay.active .modal-content {
      transform: scale(1);
  }

  .modal-image {
      width: 100%;
      height: auto;
      max-height: 70vh;
      object-fit: contain;
      display: block;
  }

  .modal-caption {
      padding: 20px;
      text-align: center;
      background: white;
  }

  .modal-title {
      font-weight: bold;
      color: #333;
      margin-bottom: 8px;
      font-size: 1.2em;
  }

  .modal-description {
      color: #666;
      font-size: 1em;
      line-height: 1.4;
      margin-bottom: 10px;
  }

  .modal-attribution {
      color: #888;
      font-size: 0.9em;
      font-style: italic;
  }

  .modal-close {
      position: absolute;
      top: 15px;
      right: 20px;
      background: rgba(255, 255, 255, 0.9);
      border: none;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      font-size: 24px;
      font-weight: bold;
      color: #333;
      cursor: pointer;
      transition: background 0.2s ease;
      display: flex;
      align-items: center;
      justify-content: center;
  }

  .modal-close:hover {
      background: white;
  }

  .gallery-item img {
      width: 100%;
      height: 250px;
      object-fit: cover;
      display: block;
  }

  .gallery-item-caption {
      padding: 15px;
      text-align: center;
      background: white;
  }

  .gallery-item-title {
      font-weight: bold;
      color: #333;
      margin-bottom: 5px;
      font-size: 1.1em;
  }

  .gallery-item-description {
      color: #666;
      font-size: 0.9em;
      line-height: 1.4;
      margin-bottom: 8px;
  }

  .gallery-item-attribution {
      color: #888;
      font-size: 0.8em;
      font-style: italic;
  }

  /* Gallery-specific responsive design */
  @media (max-width: 768px) {
      .gallery-grid {
          grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
          gap: 20px;
      }

      .gallery-item img {
          height: 200px;
      }
  }

  @media (max-width: 480px) {
      .gallery-grid {
          grid-template-columns: 1fr;
      }
  }
</style>

<BODY class="with-background">

<div class="container">
  <div class="banner"></div>
  <a href="index.html" class="back-link">‚Üê Back to Main Site</a>
  
  <h1 class="main-title">LispBM Gallery</h1>
  
  <p class="description">
    Welcome to the LispBM Gallery! This showcase features projects, creations, and contributions from the LispBM community. 
    Have you built something cool with LispBM? We'd love to feature it here! Send us your pictures and project details.
  </p>

  <div id="dataSourceNotice" style="display: none; background: #fff3cd; border: 1px solid #ffeaa7; color: #856404; padding: 10px; border-radius: 5px; margin-bottom: 20px; text-align: center;">
    <strong>Notice:</strong> Using fallback data - CSV file could not be loaded.
  </div>

  <div class="gallery-grid" id="galleryGrid">
    <!-- Gallery items will be populated by JavaScript -->
  </div>
</div>

<!-- Modal overlay for image popup -->
<div class="modal-overlay" id="modalOverlay">
  <div class="modal-content">
    <button class="modal-close" id="modalClose">&times;</button>
    <img class="modal-image" id="modalImage" src="" alt="">
    <div class="modal-caption">
      <div class="modal-title" id="modalTitle"></div>
      <div class="modal-description" id="modalDescription"></div>
      <div class="modal-attribution" id="modalAttribution"></div>
    </div>
  </div>
</div>

<script>
// Fallback gallery data (used if CSV loading fails)
const fallbackGalleryImages = [
  {
    src: 'images/collage/DemiLama.png',
    filename: 'DemiLama.png',
    title: 'DemiLama',
    description: 'Creative artwork featuring our beloved LispBM mascot',
    attribution: 'https://www.instagram.com/pixiladyart/'
  },
  {
    src: 'images/collage/cat_holiday_03.png',
    filename: 'cat_holiday_03.png',
    title: 'Holiday Cat Animation',
    description: 'Screenshot from a festive LispBM holiday animation',
    attribution: 'https://github.com/laxsjo/'
  },
  {
    src: 'images/collage/lbm-holiday-animation_04.png',
    filename: 'lbm-holiday-animation_04.png',
    title: 'LispBM Holiday Animation',
    description: 'Frame from a LispBM-powered holiday animation project',
    attribution: 'https://github.com/r3n33'
  },
  {
    src: 'images/collage/lispbm.jpeg',
    filename: 'lispbm.jpeg',
    title: 'LispBM Logo',
    description: 'Official LispBM project logo and branding',
    attribution: 'https://www.instagram.com/pixiladyart/'
  },
  {
    src: 'images/collage/lispbm_llama.png',
    filename: 'lispbm_llama.png',
    title: 'Lispy the Llama',
    description: 'Our mascot Lispy the llama in all their glory',
    attribution: 'https://www.instagram.com/pixiladyart/'
  },
  {
    src: 'images/collage/lisprunners.png',
    filename: 'lisprunners.png',
    title: 'Lisp Runners',
    description: 'Dynamic visualization of Lisp processes in action',
    attribution: 'LispBM Project'
  },
  {
    src: 'images/collage/lispwizaard.png',
    filename: 'lispwizaard.png',
    title: 'Lisp Wizard',
    description: 'The mystical Lisp Wizard conjuring code magic',
    attribution: 'LispBM Project'
  },
  {
    src: 'images/collage/llamacouldron.jpg',
    filename: 'llamacouldron.jpg',
    title: 'Llama Cauldron',
    description: 'Brewing up some LispBM magic in the llama cauldron',
    attribution: 'https://www.instagram.com/pixiladyart/'
  },
  {
    src: 'images/collage/xmas_lisp-2024-12-20_11.39.26_04.png',
    filename: 'xmas_lisp-2024-12-20_11.39.26_04.png',
    title: 'Christmas Lisp 2024',
    description: 'Holiday-themed LispBM project from December 2024',
    attribution: 'https://github.com/svenssonjoel/'
  }
];

// Global variable to store gallery data from CSV
let galleryImages = [];

// Function to parse CSV line properly (handles commas in quoted fields)
function parseCSVLine(line) {
  const result = [];
  let current = '';
  let inQuotes = false;
  
  for (let i = 0; i < line.length; i++) {
    const char = line[i];
    
    if (char === '"') {
      inQuotes = !inQuotes;
    } else if (char === ',' && !inQuotes) {
      result.push(current.trim());
      current = '';
    } else {
      current += char;
    }
  }
  result.push(current.trim());
  return result;
}

// Function to show/hide the data source notice
function showDataSourceNotice(usingFallback) {
  const notice = document.getElementById('dataSourceNotice');
  if (usingFallback) {
    notice.style.display = 'block';
  } else {
    notice.style.display = 'none';
  }
}

// Function to load and parse CSV data
async function loadGalleryData() {
  let usingFallback = false;
  
  try {
    const response = await fetch('image_credits.csv');
    const csvText = await response.text();
    const lines = csvText.trim().split('\n');
    
    console.log('CSV lines loaded:', lines.length);
    
    // Skip header row and parse each line
    for (let i = 1; i < lines.length; i++) {
      const [filename, title, description, attribution] = parseCSVLine(lines[i]);
      console.log('Parsing line:', i, filename, title, description, attribution);
      
      if (filename && title && description && attribution) {
        galleryImages.push({
          src: `images/collage/${filename}`,
          filename: filename,
          title: title,
          description: description,
          attribution: attribution
        });
      }
    }
    console.log('Successfully loaded gallery data from CSV. Items:', galleryImages.length);
  } catch (error) {
    console.log('Could not load CSV data, using fallback:', error);
    galleryImages = [...fallbackGalleryImages];
    usingFallback = true;
  }
  
  // If no items loaded, use fallback
  if (galleryImages.length === 0) {
    console.log('No gallery items loaded from CSV, using fallback data');
    galleryImages = [...fallbackGalleryImages];
    usingFallback = true;
  }
  
  // Show notice if using fallback data
  showDataSourceNotice(usingFallback);
}

// Function to format attribution (make URLs clickable)
function formatAttribution(attribution) {
  if (attribution.startsWith('http://') || attribution.startsWith('https://')) {
    return `<a href="${attribution}" target="_blank" rel="noopener noreferrer" style="color: #007bff; text-decoration: none;">${attribution}</a>`;
  }
  return attribution;
}

// Function to create gallery items
function createGalleryGrid() {
  const galleryGrid = document.getElementById('galleryGrid');
  
  galleryImages.forEach((image, index) => {
    const galleryItem = document.createElement('div');
    galleryItem.className = 'gallery-item';
    
    const formattedAttribution = formatAttribution(image.attribution);
    
    galleryItem.innerHTML = `
      <img src="${image.src}" alt="${image.title}" loading="lazy">
      <div class="gallery-item-caption">
        <div class="gallery-item-title">${image.title}</div>
        <div class="gallery-item-description">${image.description}</div>
        <div class="gallery-item-attribution">Credit: ${formattedAttribution}</div>
      </div>
    `;
    
    // Add click event to open modal
    galleryItem.addEventListener('click', () => openModal(image, image.attribution));
    
    galleryGrid.appendChild(galleryItem);
  });
}

// Function to open modal with image details
function openModal(image, attribution) {
  const modal = document.getElementById('modalOverlay');
  const modalImage = document.getElementById('modalImage');
  const modalTitle = document.getElementById('modalTitle');
  const modalDescription = document.getElementById('modalDescription');
  const modalAttribution = document.getElementById('modalAttribution');
  
  modalImage.src = image.src;
  modalImage.alt = image.title;
  modalTitle.textContent = image.title;
  modalDescription.textContent = image.description;
  modalAttribution.innerHTML = `Credit: ${formatAttribution(attribution)}`;
  
  modal.classList.add('active');
  document.body.style.overflow = 'hidden'; // Prevent background scrolling
}

// Function to close modal
function closeModal() {
  const modal = document.getElementById('modalOverlay');
  modal.classList.remove('active');
  document.body.style.overflow = ''; // Restore background scrolling
}

// Initialize gallery when page loads
async function initGallery() {
  await loadGalleryData();
  createGalleryGrid();
  setupModalEvents();
}

// Setup modal event listeners
function setupModalEvents() {
  const modal = document.getElementById('modalOverlay');
  const closeButton = document.getElementById('modalClose');
  
  // Close button click
  closeButton.addEventListener('click', closeModal);
  
  // Click outside modal content to close
  modal.addEventListener('click', (e) => {
    if (e.target === modal) {
      closeModal();
    }
  });
  
  // ESC key to close
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && modal.classList.contains('active')) {
      closeModal();
    }
  });
}

window.addEventListener('load', initGallery);
</script>

</BODY>
</HTML>