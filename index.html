
<HTML lang="en-US">

<HEAD>  
  
  <meta charset="UTF-8">
  <meta name="description" content="LispBM is a lisp for microcontrollers with concurrency and message passing. Learn how to implement a Lisp interpreter with detailed articles on evaluators, garbage collection, parsing, and embedded REPL development. Used by VESC motor controllers.">
  <meta name="keywords" content="lispbm, lisp microcontroller, embedded lisp, esp32 lisp, stm32 lisp, freertos lisp, chibios lisp, zephyr lisp, vesc lisp, microcontroller scripting, embedded scripting, lisp interpreter, lisp repl, esp32c3 lisp, stm32f4 lisp, lisp audio programming, i2s audio lisp, concurrency message passing, lisp garbage collection, continuation passing style, bytecode compiler, embedded systems programming, iot scripting language, real-time scripting">
  <meta name="author" content="Bo Joel Svensson">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>LispBM: Concurrent Lisp for Microcontrollers</title>

  <!-- SEO Meta Tags -->
  <link rel="canonical" href="https://www.lispbm.com/">
  <meta name="robots" content="index, follow">
  
  <!-- Open Graph Meta Tags -->
  <meta property="og:title" content="LispBM: Concurrent Lisp for Microcontrollers">
  <meta property="og:description" content="LispBM is a lisp for microcontrollers with concurrency and message passing. Learn how to implement a Lisp interpreter with detailed articles on evaluators, garbage collection, parsing, and embedded REPL development.">
  <meta property="og:image" content="https://www.lispbm.com/images/lispbm_llama_small.png">
  <meta property="og:url" content="https://www.lispbm.com/">
  <meta property="og:type" content="website">
  <meta property="og:site-name" content="LispBM">
  
  <!-- Twitter Card Meta Tags -->
  <meta name="twitter:card" content="summary-large-image">
  <meta name="twitter:title" content="LispBM: Concurrent Lisp for Microcontrollers">
  <meta name="twitter:description" content="LispBM is a lisp for microcontrollers with concurrency and message passing. Learn how to implement a Lisp interpreter with detailed articles on evaluators, garbage collection, parsing, and embedded REPL development.">
  <meta name="twitter:image" content="https://www.lispbm.com/images/lispbm_llama_small.png">

  <link rel="apple-touch-icon" sizes="180x180" href="./ico/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="./ico/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="./ico/favicon-16x16.png">
  <link rel="shortcut icon" href="./ico/favicon.ico">
  <link rel="icon" type="image/vnd.microsoft.icon" href="./ico/favicon.ico">
  <link rel="icon" type="image/x-icon" href="./ico/favicon.ico">
  <link rel="icon" href="./ico/favicon.ico">
  <link rel="manifest" href="./ico/site.webmanifest">
  
  <!-- Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "SoftwareApplication",
    "name": "LispBM",
    "alternateName": "LBM",
    "description": "A Lisp programming language for microcontrollers with concurrency and message passing",
    "url": "https://www.lispbm.com",
    "downloadUrl": "https://github.com/svenssonjoel/lispBM",
    "operatingSystem": ["Linux", "Windows", "Embedded", "STM32", "ESP32", "NRF52"],
    "programmingLanguage": "Lisp",
    "applicationCategory": "DeveloperApplication",
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "USD"
    },
    "author": {
      "@type": "Person",
      "name": "Bo Joel Svensson"
    },
    "publisher": {
      "@type": "Organization",
      "name": "LispBM Project",
      "url": "https://www.lispbm.com"
    },
    "sourceOrganization": {
      "@type": "Organization",
      "name": "LispBM Project",
      "url": "https://github.com/svenssonjoel/lispBM"
    }
  }
  </script>
  
  <link rel="stylesheet" href="styles.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;700&display=swap" rel="stylesheet">

</HEAD>

<style type="text/css">
  /* Index-specific styles */

  .nav-menu {
      margin-bottom: 30px;
      position: relative;
  }

  .menu-toggle {
      background: #007bff;
      color: white;
      border: none;
      padding: 15px 20px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 16px;
      font-weight: 500;
      transition: background-color 0.2s;
      width: 100%;
      text-align: center;
  }

  .menu-toggle:hover {
      background: #0056b3;
  }

  .nav-links {
      display: none;
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background: #000080;
      border: 2px solid #00ffff;
      box-shadow: none;
      z-index: 1000;
      list-style: none;
      margin: 10px 0 0 0;
      padding: 1px;
      max-height: 400px;
      overflow-y: auto;
      font-family: 'IBM Plex Mono', 'Consolas', 'Liberation Mono', 'Lucida Console', monospace;
      font-size: 12px;
      font-weight: 700;
      letter-spacing: 1px;
      text-rendering: optimizeSpeed;
      -webkit-font-smoothing: none;
      -moz-osx-font-smoothing: unset;
  }

  .nav-links.show {
      display: block;
  }

  .nav-links li {
      margin: 0;
      padding: 0;
  }

  .nav-links a {
      display: block;
      color: #00ffff;
      text-decoration: none;
      padding: 2px 8px;
      background: #000080;
      transition: none;
      line-height: 1.2;
  }

  .nav-links a:hover {
      background-color: #00ffff;
      color: #000080;
      text-decoration: none;
  }

  .nav-divider {
      background: #000080;
      color: #ffff00;
      padding: 2px 8px;
      font-size: 12px;
      font-weight: bold;
      text-transform: uppercase;
      letter-spacing: 1px;
      border-top: 1px solid #008080;
      border-bottom: 1px solid #008080;
      margin: 1px 0;
      line-height: 1.2;
  }

  .nav-divider:first-child {
      border-top: none;
      margin-top: 0;
  }

  .main-content {
      margin: 0;
      padding: 0;
      max-width: 100%;
      box-sizing: border-box;
  }

  pre {
      overflow-x: auto;
      border-radius: 5px;
      background: #414449;
      color: #b3bccc;
      padding: 15px;
      font-size: 13pt;
      tab-size: 4;
      -webkit-box-shadow: 0 0 8px 0 rgba(0, 0, 0, 0.75);
      -moz-box-shadow: 0 0 8px 0 rgba(0, 0, 0, 0.75);
      box-shadow: 0 0 8px 0 rgba(0, 0, 0, .75);
  }

  .image-comparison {
      display: flex;
      gap: 20px;
      margin: 20px 0;
      flex-wrap: wrap;
  }

  .image-comparison figure {
      flex: 1;
      margin: 0;
      text-align: center;
      min-width: 300px;
  }

  .image-comparison img {
      width: 100%;
      height: auto;
      border-radius: 5px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  }

  .image-comparison figcaption {
      margin-top: 10px;
      font-style: italic;
      color: #666;
      font-size: 0.9em;
  }

  .highlight {
      background: #e7f3ff;
      border-left: 4px solid #007bff;
      padding: 15px 20px;
      margin: 20px 0;
      border-radius: 4px;
  }

  /* Responsive design - index-specific */
  @media (max-width: 768px) {
      .nav-menu {
          padding: 10px;
      }

      .nav-menu a {
          margin: 5px 10px;
          font-size: 0.9em;
      }

      .banner {
          margin-bottom: 15px;
      }
  }


  
</style>



<BODY class="with-background">

<div class="container">
  <nav class="nav-menu" aria-label="Main navigation">
    <button class="menu-toggle" aria-label="Toggle menu" onclick="toggleMenu()">â˜° Menu</button>
    <ul class="nav-links" id="navLinks">
      <li><a href="why-lisp.html">Why Lisp?</a></li>
      <li><a href="contributors.html">Contributors</a></li>
      <li><a href="gallery.html">Gallery</a></li>
      <li class="nav-divider">Getting Started</li>
      <li><a href="#getting-started">Quick Start</a></li>
      <li class="nav-divider">Resources</li>
      <li><a href="#documentation">Documentation</a></li>
      <li><a href="#editor-support">Editor Support</a></li>
      <li><a href="#presentations">Presentations</a></li>
      <li><a href="#language-implementation">Implementation</a></li>
      <li><a href="#testlogs">Testing</a></li>
      <li><a href="#performance">Performance</a></li>
      <li><a href="#other-lisps">Other Lisps</a></li>
      <li class="nav-divider">External</li>
      <li><a href="https://github.com/svenssonjoel/lispBM">GitHub</a></li>
      <li><a href="https://discord.gg/urtJUUMnwQ">Discord</a></li>
      <li><a href="contributors.html">Community & Contribution</a></li>
    </ul>
  </nav>

  <main class="main-content">
    <div class="banner"></div>

<section>
<h1 id="lispbm-lbm" >lispBM: A Lisp for Microcontrollers</h1>   

<p>LispBM (LBM) is a Lisp or Scheme-like programming language for microcontrollers. LispBM also borrows a couple of ideas from Erlang when it comes to concurrency, message passing, pattern matching and process monitoring. The LispBM runtime system can be compiled for either 32 or 64-bit platforms and runs on a wide range of hardware such as, for example, STM32, NRF52, ESP32 or X86. When running the LispBM runtime system on a microcontroller, it can be built on top of ChibiOS, FreeRTOS or ZephyrOS or, if you are adventurous, on bare-metal. LispBM can also be built to run on top of regular Linux (and now even Windows).</p>

<p> Who wouldn&#8217;t want a REPL (read eval print loop) on their embedded platform? This is what LispBM is for!
</p>

<div class="highlight">
  <strong>New to Lisp?</strong> Read about <a href="why-lisp.html">why Lisp is perfect for embedded systems</a> and the story behind LispBM.
</div>
</section>

<!-- LispBM Gallery section -->
<section id="gallery">
  <h2>LispBM Gallery</h2>
  <div class="highlight">
    <strong>Have you done something cool with LispBM?</strong> Send us a picture for our LispBM Gallery! You can <a href="gallery.html">view the full gallery</a> to see all the amazing projects from our community.
  </div>


<div id="homepageDataSourceNotice" style="display: none; background: #fff3cd; border: 1px solid #ffeaa7; color: #856404; padding: 10px; border-radius: 5px; margin: 15px 0; text-align: left;">
  <strong>Notice:</strong> Using fallback data - CSV file could not be loaded for homepage gallery.
</div>

<div style="margin-top: 20px;">
  <a href="gallery.html" style="display: inline-block; text-decoration: none;">
    <img id="randomCollageImage" src="" alt="Random collage image" style="max-width: 300px; max-height: 200px; border-radius: 5px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); cursor: pointer; transition: transform 0.2s;" onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'" loading="lazy"/>
  </a>
  <p id="imageAttribution" style="color: #888; font-size: 0.8em; font-style: italic; margin-top: 8px;"></p>
</div>
</section>

<section id="contributors">
<h2>Contributors</h2>
<p>LispBM is made possible by an amazing community of developers who contribute their time, expertise, and passion. You can <a href="contributors.html">meet our contributors</a> to see the people behind the project.</p>

<p>There are lots of interesting things to code on in and around the LispBM runtime system. I would love to interact with people who are interested in high-level programming languages on microcontrollers (or elsewhere) so please do not be shy to make contact. Together we can make great stuff happen ;)</p>

<div class="highlight">
  <strong>For detailed contribution information and to see how you can help</strong>, visit our <a href="contributors.html">Contributors page</a>.
</div>



</section>

<section id="getting-started">
<h2>Quick Start: Try LispBM on Linux in 60 Seconds</h2>

<p>Clone the repository and build the REPL:</p>

<pre>git clone https://github.com/svenssonjoel/lispBM.git
cd lispBM/repl
make
./repl</pre>

<p><strong>Note:</strong> Requires <code>gcc-multilib</code>, <code>libreadline-dev:i386</code>, and <code>libpng-dev:i386</code>. See the <a href="getting-started.html#the-lbm-repl">full Linux installation guide</a> for dependency details.</p>

<div class="highlight">
  <strong>For detailed getting started guides go</strong> <a href="getting-started.html"> here. </a>
</div>


  
</section>

<section id="documentation">
<h2>Documentation</h2>
<ul>
<li><a href="https://github.com/svenssonjoel/lispBM/blob/master/doc/lbmref.md">LispBM language reference</a>.</li>
<li><a href="https://github.com/svenssonjoel/lispBM/blob/master/doc/displayref.md">Graphics library reference</a>.</li>
<li><a href="https://github.com/svenssonjoel/lispBM/blob/master/doc/ttfref.md">TrueType Font (TTF) library reference</a>.</li>
<li><a href="https://github.com/svenssonjoel/lispBM/blob/master/doc/runtimeref.md">Runtime system library reference</a>.</li>
<li><a href="https://github.com/svenssonjoel/lispBM/blob/master/doc/dynref.md">Library of dynamically loadable functionality</a>.</li>
<li><a href="https://github.com/svenssonjoel/lispBM/blob/master/doc/gotchas.md">Gotchas and caveats</a>.</li>
<li><a href="./cdocs/html/index.html">Implementation C code documents</a>.</li>
<li><a href="./cheatsheet.md">LispBM Language Cheatsheet</a> and <a href="./to-pdf.sh">to-pdf.sh script</a> that can be used to build a PDF from your modified cheatsheet.</li>
<li><a href="./cheatsheet.pdf">LispBM Language Cheatsheet (PDF)</a>.</li>
<li>There are <a href="https://youtube.com/playlist?list=PLtf-3TaqZoDOQqZcB9Yj-R1zS2DWDZ9q9">video demonstrations on YouTube</a>.</li>
</ul>
</section>

<section id="editor-support">
<h2>Editor support</h2>
<ul>
<li><a href="https://vesc-project.com/vesc-tool">vesc-tool</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=rasmus-soderhielm.lispbm-language-support">vscode support</a></li>
<li><a href="https://github.com/cortex/zed-lispbm">Zed</a></li>
<li><a href="https://github.com/cortex/tree-sitter-lispbm">Tree-sitter grammar</a></li>
</ul>
</section>

<section id="presentations">
<h2>Presentations</h2>
<ul>
  <li><a href="LBM-DEC-8.pdf"> Chalmers FP-Talk December 2023 </a> - a video can be found on <a href="https://youtu.be/YAhUIaLu5po?feature=shared">YouTube</a></li>
  <li><a href="fp-talk-2025.pdf">Chalmers FP-Talk May 2025 presentation</a></li>
</ul>
</section>

<section id="language-implementation">
<h2>Language Implementation</h2>
<p>Texts about language development, implementation techniques, and the technical details behind LispBM.</p>
<ul>
  <li><a href="./quasiquotation-comparison.html">LispBM vs Guile 3: Quasiquotation Comparison</a></li>
  <li><a href="./pages/lispbm-evaluator/index.html"> Defunctionalizing a Continuation-Passing Style Evaluator </a></li>
  <li><a href="./pages/lispbm-compilation-1"> Towards a bytecode compiler for lispBM </a></li>
  <li><a href="./pages/lispbm-register-machine/index.html"> Evaluation of expressions using a register machine </a> (Edited June 23, 2020: BugFix!)</li>
  <li><a href="./pages/lispbm-memory-allocation/index.html"> An attempt to get a better grip on the memory usage </a></li>
  <li><a href="./pages/lispbm-towards-concurrency-2/index.html"> Spawn and Wait: Concurrency in lispBM part 2 </a></li> 
  <li><a href="./pages/lispbm-towards-concurrency/index.html"> Concurrency in lispBM part 1 </a></li> 
  <li><a href="./pages/lispbm-quasiquotation/index.html"> Quasiquotation in lispBM </a>  (Edited June 10, 2020: BugFix)</li>
  <li><a href="./pages/lispbm-short-circuit-logic/index.html"> Boolean operators with short-circuit behavior </a></li>
  <li><a href="./pages/lispbm-recursion-to-iteration/index.html"> Turning Recursion into Iteration using an Explicit Stack </a></li>
  <li><a href="./pages/lispbm-esp32-repl/index.html"> Implementation of a lispBM REPL for the ESP32 MCU </a></li> 
  <li><a href="./pages/lispbm-zephyros-repl/index.html"> Implementing a lispBM REPL in Zephyr OS </a></li> 
  <li><a href="./pages/lispbm-compressed-code/index.html"> Compression and parsing of compressed source code </a></li> 
  <li><a href="./pages/lispbm-garbage-collector/index.html"> Garbage collection in lispBM </a></li> 
  <li><a href="./pages/lispbm-chibios-repl/index.html"> Implementing a lispBM REPL in ChibiOs </a></li> 
  <li><a href="./pages/lispbm-fundamentals-and-extensions/index.html"> Fundamental operations and extensions in lispBM </a></li>
  <li><a href="./pages/lispbm-parsing-expressions/index.html"> Parsing of lispBM expressions </a></li> 
  <li><a href="./pages/lispbm-boxed-values/index.html"> A quick look at boxed values in lispBM </a></li>
  <li><a href="./pages/lispbm-evaluation-function/index.html"> More in-depth walkthrough of the lispBM evaluation function </a></li>
  <li><a href="./pages/lispbm-current-status/index.html">Introduction to LispBM for microcontrollers</a></li>
</ul>
</section>

<section id="testlogs">
<h2>Testing of LispBM</h2>

<p> The table below contains test reports for the recent numbered releases of LispBM.
  The test reports apply to the tagged states with the same numbering on GitHub.
  Note that only versions <code>X.Y.0</code> get a tag and a full run of all tests.
  Versions <code>X.Y.Z</code> for non-zero <code>Z</code> are experimental and in development,
  and are sporadically tested as part of development but not given a full testing log treatment.
  If you want to use LispBM for something serious, please use an <code>X.Y.0</code> version
  and keep in mind that testing is never exhaustive and in no way a guarantee of correctness
  or suitability for any given purpose. A thorough safety and reliability analysis should be
  performed on the software system where LispBM is integrated as a whole.
</p>

<p> The table of test-results is provided for traceability purposes and gives a snapshot of known problems
  with a given version of LispBM.
</p>

<p> That said, we are very serious about our testing and we do want to make it possible to use LispBM
  as a scripting language integrated into <em>any</em> application. This is an ongoing effort and
  collaboration is most appreciated.</p>

<p>Please report bugs via the issues tracker on <a href="https://github.com/svenssonjoel/lispBM/issues">GitHub</a>.</p>

<table>
    <thead>
        <tr>
            <th>Testlog</th>
            <th>Tagged version</th>
        </tr>
    </thead>
    <tbody>
      <tr>
        <td><a href="testlogs\html\version-0.34.0\index.html">0.34.0</a></td>
        <td><a href="https://github.com/svenssonjoel/lispBM/releases/tag/0.34.0"> tag 0.34.0 </a> </td>
      </tr>
      <tr>
        <td><a href="testlogs\html\version-0.33.0\index.html">0.33.0</a></td>
        <td><a href="https://github.com/svenssonjoel/lispBM/releases/tag/0.33.0"> tag 0.33.0 </a> </td>
      </tr>
      <tr>
        <td><a href="testlogs\html\version-0.32.0\index.html">0.32.0</a></td>
        <td><a href="https://github.com/svenssonjoel/lispBM/releases/tag/0.32.0"> tag 0.32.0 </a> </td>
      </tr>
      <tr>
        <td><a href="testlogs\html\version-0.31.0\index.html">0.31.0</a></td>
        <td><a href="https://github.com/svenssonjoel/lispBM/releases/tag/0.31.0"> tag 0.31.0 </a> </td>
      </tr>
      <tr>
        <td><a href="testlogs\html\version-0.30.0\index.html">0.30.0</a></td>
        <td><a href="https://github.com/svenssonjoel/lispBM/releases/tag/0.30.0"> tag 0.30.0 </a> </td>
      </tr>
      <tr>
        <td><a href="testlogs\html\version-0.29.0\index.html">0.29.0</a></td>
        <td><a href="https://github.com/svenssonjoel/lispBM/releases/tag/0.29.0"> tag 0.29.0 </a> </td>
      </tr>
      <tr>
        <td><a href="testlogs\html\version-0.28.0\index.html">0.28.0</a></td>
        <td><a href="https://github.com/svenssonjoel/lispBM/releases/tag/0.28.0"> tag 0.28.0 </a> </td>
      </tr>
      <tr>
        <td><a href="testlogs\html\version-0.27.0\index.html">0.27.0</a></td>
        <td><a href="https://github.com/svenssonjoel/lispBM/releases/tag/0.27.0"> tag 0.27.0 </a> </td>
      </tr>
      <tr>
        <td><a href="testlogs\html\version-0.26.0\index.html">0.26.0</a></td>
        <td><a href="https://github.com/svenssonjoel/lispBM/releases/tag/0.26.0"> tag 0.26.0 </a> </td>
      </tr>
      <tr>
        <td><a href="testlogs\html\version-0.25.0\index.html">0.25.0</a></td>
        <td><a href="https://github.com/svenssonjoel/lispBM/releases/tag/0.25.0"> tag 0.25.0 </a></td>
      </tr>
      <tr>
        <td><a href="testlogs\html\version-0.24.0\index.html">0.24.0</a></td>
        <td><a href="https://github.com/svenssonjoel/lispBM/releases/tag/0.24.0"> tag 0.24.0 </a></td>
      </tr>
      <tr>
        <td><a href="testlogs\html\version-0.23.0\index.html">0.23.0</a></td>
        <td><a href="https://github.com/svenssonjoel/lispBM/releases/tag/0.23.0"> tag 0.23.0 </a></td>
      </tr>
    </tbody>
</table>

<p><strong>NOTE:</strong> The scan-build directory is empty if the scan-build tool finds no issues with the code. </p>
<p><strong>NOTE:</strong> The Infer result file <code>infer-x.y.z.txt</code> is empty if Infer finds no issues.</p>    
<br>
<p>We expand on our testing from time to time but currently apply the following testing methods: </p>
<ul>
<li> Unit tests. </li>
<li> Static analysis using <a href="https://clang-analyzer.llvm.org/scan-build.html"> CLANG scan-build </a>. </li>
<li> Static analysis using <a href="https://github.com/facebook/infer"> Infer </a>. </li>
<li> Static analysis using <a href="https://cppcheck.sourceforge.io/"> cppcheck </a>. </li>
<li> Work in progress - Property based testing using <a href="https://www.cse.chalmers.se/~rjmh/QuickCheck/manual.html"> Haskell QuickCheck </a>. </li>
<li> Test coverage is checked with gcov and <a href="https://gcovr.com/en/stable/">gcovr coverage tool</a>. </li>
</ul>

Leading up to version 0.33.0, focus was on improving test coverage. As can be seen from the images below, test coverage has
increased drastically and we are now covering 97.4% of functions and 91.7% of lines. There are still improvements needed for
branch coverage. Many of the uncovered branches are extremely hard to trigger and in a correctly set-up integration of LispBM
it may be impossible to trigger these error conditions. The plan for future testing is to slowly increase coverage with tests
designed to trigger even more unlikely edge cases, but overly defensive programming practices (such as conditions that cannot arise in a
correctly configured LispBM system) will be removed.

<div class="image-comparison">
  <figure>
    <img src="./images/coverage_0.32.0.jpg" alt="LispBM testing coverage version 0.32.0" loading="lazy" />
    <figcaption>Test coverage for version 0.32.0</figcaption>
  </figure>
  <figure>
    <img src="./images/coverage_0.33.0.jpg" alt="LispBM testing coverage version 0.33.0" loading="lazy" />
    <figcaption>Test coverage for version 0.33.0</figcaption>
  </figure>
</div>

</section>

<section id="performance">
<h2>LispBM Performance Evolution</h2>

<p>The performance of the LispBM implementation continuously evolves as we introduce new features and engage in optimization efforts. We work to enhance its efficiency for microcontrollers, such as the STM32F4 running at 168MHz.</p>

<p>Below, you can find performance charts illustrating LispBM&#8217;s performance on a set of benchmarks:</p>

<div class="image-comparison">
  <figure>
    <img src="./images/benchresults.png" alt="LispBM performance benchmarks chart showing execution times" loading="lazy" />
    <figcaption>Performance benchmarks with linear scale</figcaption>
  </figure>
  <figure>
    <img src="./images/benchresults_log.png" alt="LispBM performance benchmarks chart with logarithmic scale" loading="lazy" />
    <figcaption>Performance benchmarks with logarithmic scale</figcaption>
  </figure>
</div>

<p>If you&#8217;re interested in the technical details and benchmarks, you can explore our benchmark code <a href="https://github.com/svenssonjoel/lispBM/tree/master/benchmarks">here</a></p>
</section>

<section id="other-lisps">
<h2>Other Lisp-based Languages for Microcontrollers</h2>

<p>Explore a range of Lisp-like programming languages that are tailored for microcontroller development. These languages are designed to thrive in resource-constrained environments, making them ideal choices for embedded systems. Whether you&#8217;re looking for a lightweight solution or a minimalist Lisp dialect, these languages offer unique approaches to microcontroller programming.</p>

<ul>
  <li>
    <strong>uLisp:</strong> A Lisp dialect specifically designed for microcontrollers. <a href="http://www.ulisp.com/">Learn more</a>
  </li>
  <li>
    <strong>FemtoLisp:</strong> A minimalistic Lisp designed for resource-constrained environments. <a href="https://github.com/JeffBezanson/femtolisp">Learn more</a>
  </li>
  <li>
    <strong>PicoLisp:</strong> A lightweight and minimalistic Lisp dialect for both server-side and embedded programming. <a href="https://picolisp.com/">Learn more</a>
  </li>
</ul>

<p>Is your favorite microcontroller Lisp missing from this list? Please send the details in an email to bo(dot)joel(dot)svensson(whirly-a)gmail(dot)com.
</section>

<hr>

<script>
// Fallback gallery data (used when CSV loading fails)
const fallbackGalleryImages = [
  {
    src: 'images/collage/rad_rod.png',
    filename: 'rad_rod.png',
    title: 'Rad Rod AWD',
    description: 'Razor Ground Force Rad Rod AWD. VESCÂ® based controllers at 8KW',
    attribution: 'https://www.youtube.com/watch?v=NEgMkoUbaqs'
  },
  {
    src: 'images/collage/DemiLama.png',
    filename: 'DemiLama.png',
    title: 'DemiLama',
    description: 'Creative artwork featuring our beloved LispBM mascot',
    attribution: 'https://www.instagram.com/pixiladyart/'
  },
  {
    src: 'images/collage/cat_holiday_03.png',
    filename: 'cat_holiday_03.png',
    title: 'Holiday Cat Animation',
    description: 'Screenshot from a festive LispBM holiday animation',
    attribution: 'https://github.com/laxsjo/'
  },
  {
    src: 'images/collage/lbm-holiday-animation_04.png',
    filename: 'lbm-holiday-animation_04.png',
    title: 'LispBM Holiday Animation',
    description: 'Frame from a LispBM-powered holiday animation project',
    attribution: 'https://github.com/r3n33'
  },
  {
    src: 'images/collage/lispbm.jpeg',
    filename: 'lispbm.jpeg',
    title: 'LispBM Logo',
    description: 'Official LispBM project logo and branding',
    attribution: 'https://www.instagram.com/pixiladyart/'
  },
  {
    src: 'images/collage/lispbm_llama.png',
    filename: 'lispbm_llama.png',
    title: 'Lispy the Llama',
    description: 'Our mascot Lispy the llama in all their glory',
    attribution: 'https://www.instagram.com/pixiladyart/'
  },
  {
    src: 'images/collage/lisprunners.png',
    filename: 'lisprunners.png',
    title: 'Lisp Runners',
    description: 'Dynamic visualization of Lisp processes in action',
    attribution: 'LispBM Project'
  },
  {
    src: 'images/collage/lispwizaard.png',
    filename: 'lispwizaard.png',
    title: 'Lisp Wizard',
    description: 'The mystical Lisp Wizard conjuring code magic',
    attribution: 'LispBM Project'
  },
  {
    src: 'images/collage/llamacouldron.jpg',
    filename: 'llamacouldron.jpg',
    title: 'Llama Cauldron',
    description: 'Brewing up some LispBM magic in the llama cauldron',
    attribution: 'https://www.instagram.com/pixiladyart/'
  },
  {
    src: 'images/collage/xmas_lisp-2024-12-20_11.39.26_04.png',
    filename: 'xmas_lisp-2024-12-20_11.39.26_04.png',
    title: 'Christmas Lisp 2024',
    description: 'Holiday-themed LispBM project from December 2024',
    attribution: 'https://github.com/svenssonjoel/'
  }
];

// Global variable to store gallery data from CSV
let galleryImages = [];

// Function to parse CSV line properly (handles commas in quoted fields)
function parseCSVLine(line) {
  const result = [];
  let current = '';
  let inQuotes = false;
  
  for (let i = 0; i < line.length; i++) {
    const char = line[i];
    
    if (char === '"') {
      inQuotes = !inQuotes;
    } else if (char === ',' && !inQuotes) {
      result.push(current.trim());
      current = '';
    } else {
      current += char;
    }
  }
  result.push(current.trim());
  return result;
}

// Function to show/hide the data source notice for homepage
function showHomepageDataSourceNotice(usingFallback) {
  const notice = document.getElementById('homepageDataSourceNotice');
  if (usingFallback) {
    notice.style.display = 'block';
  } else {
    notice.style.display = 'none';
  }
}

// Function to load and parse CSV data
async function loadGalleryData() {
  let usingFallback = false;
  
  try {
    const response = await fetch('image_credits.csv');
    const csvText = await response.text();
    const lines = csvText.trim().split('\n');
    
    // Skip header row and parse each line
    for (let i = 1; i < lines.length; i++) {
      const [filename, title, description, attribution] = parseCSVLine(lines[i]);
      if (filename && title && description && attribution) {
        galleryImages.push({
          src: `images/collage/${filename}`,
          filename: filename,
          title: title,
          description: description,
          attribution: attribution
        });
      }
    }
    console.log('Successfully loaded gallery data from CSV for homepage');
  } catch (error) {
    console.log('Could not load CSV data for homepage, using fallback:', error);
    galleryImages = [...fallbackGalleryImages];
    usingFallback = true;
  }
  
  // If no items loaded, use fallback
  if (galleryImages.length === 0) {
    console.log('No gallery items loaded from CSV for homepage, using fallback data');
    galleryImages = [...fallbackGalleryImages];
    usingFallback = true;
  }
  
  // Show notice if using fallback data
  showHomepageDataSourceNotice(usingFallback);
}

// Function to format attribution (make URLs clickable)
function formatAttribution(attribution) {
  if (attribution.startsWith('http://') || attribution.startsWith('https://')) {
    return `<a href="${attribution}" target="_blank" rel="noopener noreferrer" style="color: #007bff; text-decoration: none;">${attribution}</a>`;
  }
  return attribution;
}

// Function to display a random image with attribution
function displayRandomImage() {
  const randomIndex = Math.floor(Math.random() * galleryImages.length);
  const randomImageObj = galleryImages[randomIndex];
  
  document.getElementById('randomCollageImage').src = randomImageObj.src;
  
  const formattedAttribution = formatAttribution(randomImageObj.attribution);
  document.getElementById('imageAttribution').innerHTML = `Credit: ${formattedAttribution}`;
}

// Initialize random image display when page loads
async function initRandomImage() {
  await loadGalleryData();
  displayRandomImage();
}

window.addEventListener('load', initRandomImage);

// Navigation menu toggle
function toggleMenu() {
  const navLinks = document.getElementById('navLinks');
  navLinks.classList.toggle('show');
}

// Close menu when clicking outside
document.addEventListener('click', function(event) {
  const navMenu = document.querySelector('.nav-menu');
  const navLinks = document.getElementById('navLinks');

  if (!navMenu.contains(event.target)) {
    navLinks.classList.remove('show');
  }
});

// Close menu when clicking on a link
document.querySelectorAll('.nav-links a').forEach(link => {
  link.addEventListener('click', function() {
    document.getElementById('navLinks').classList.remove('show');
  });
});
</script>

  </main>
</div>

</BODY>
</HTML>
