<HTML>

<HEAD>  
  
  <meta charset="UTF-8">
  <meta name="description" content="LispBM: a lisp for microcontrollers ">
  <meta name="keywords" content="lisp, scheme, lispbm, script, scripting microcontrollers, stm32, esp32, microcontroller lisp, lisp for microcontrollers">
  <meta name="author" content="Bo Joel Svensson">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">


  <link rel="apple-touch-icon" sizes="180x180" href="./ico/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="./ico/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="./ico/favicon-16x16.png">
  <link rel="manifest" href="./ico/site.webmanifest">
  
</HEAD> 

<TITLE>LispBM: A Lisp for Microcontrollers</TITLE>

<style type="text/css">
  body, html {
      margin-left: 5%;
      margin-right: 5%;
  }

  div.topnav {
      overflow: auto;
      white-space: nowrap;
      background-color: #333;
  }

  img {
      max-width: 100%;
      max-height: 100vh;
      width: auto;
      margin: auto;
  }

  
</style>

<BODY bgcolor=#C0C0C0>

<h1 id="lispbm-lbm">lispBM: A Lisp for Microcontrollers</h1>
<p>LispBM (LBM) is a lisp or scheme like programming language for microcontrollers. LispBM also borrows a couple of ideas from Erlang when it comes to concurrency, message passing, pattern matching and process monitoring. The LispBM runtime system can be compiled for either 32 or 64 bit platforms and runs on a wide range of hardware such as for example STM32, NRF52, ESP32 or X86. When running the LispBM runtime system on a microcontroller it can be built on top of ChibiOS, FreeRTOS or ZephyrOS or, if you are adventurous, on bare-metal. LispBM can also be built to run on top of a regular linux.</p>

<p> Who wouldn't want a REPL (read eval print loop) on their embedded platform? This is what LispBM is for!
  </p>


<img src="./images/lispbm_llama_small.png" alt="LispBM mascot" />


<p>The LispBM mascot, Lispy the llama, was created by <a href="https://www.instagram.com/pixiladyart/">PixiLadyArt</a>. Thank you, Pixi!</p>

<h2 id="want-to-get-involved-and-help-out">Want to get involved and help out?</h2>
<p>There are lots of interesting things to code on in and around the LispBM runtime system. I would love to interact with people who are interested in high-level programming languages on microcontrollers (or elsewhere) so please do not be shy to make contact. Together we can make great stuff happen ;)</p>
<ol type="1">
<li>Are you interested in microcontrollers and programming languages?</li>
<li>You find it fun to mess around in C code with close to zero comments?</li>
<li>Then join in the fun. Lots to do, so little time!</li>
<li>Clone the <a href="https://www.github.com/svenssonjoel/lispbm">repository</a>.
<li>Poke me by mail bo(dot)joel(dot)svensson(whirly-a)gmail(dot)com.</li>
</ol>
<p>There are areas where insights and help would matter greatly. Some I can think of are:</p>
<ol type="1">
<li>Running LispBM on system simulators.</li>
<li>LispBM efficiency, compilation, byte-code and real time garbage collection.</li>
<li>Code size optimisation. Do more with less, while maintaining performance.</li>
<li>Documentation and testing.</li>
<li>Useful extension libraries.</li>
<li>Lisp scriptable home automation.</li>
<li>Lisp scriptable MIDI sequencers.</li>
<li>Lisp scriptable Audio synthesizers.</li>
<li>Porting the Linux REPL to Windows.</li>
<li>…</li>
</ol>

<h2 id="getting-started">Getting started on embedded: easy</h2>
<p>The easiest way to get started with LispBM programming is to use <a href="https://vesc-project.com/vesc_tool">VESC-Tool</a> together with the <a href="https://github.com/vedderb/vesc_express">VESC EXPRESS Firmware</a> on an <a href="https://docs.espressif.com/projects/esp-idf/en/latest/esp32c3/hw-reference/esp32c3/user-guide-devkitm-1.html">esp32c3</a>.</p>
<p>VESC-Tool gives you access to a very capable <a href="https://vesc-project.com/sites/default/files/lisp%20overview.png">IDE</a> for lisp programming on embedded systems and the VESC Express firmware provides built in functionality to interface with CAN, WIFI, BLE and UART as well as GPIO and display drivers.</p>
<p>If you are looking for a more bare-bones way to add scripting capabilities to your embedded system, LispBM is quite platform independent and can be compiled for many different MCUs and systems. LispBM can tie into the rest of your application via what we call “extensions” which are C functions that can be called from your LispBM scripts.</p>

<h2 id="getting-started">Getting started on embedded: hard</h2>
<p>If you want to build your own lisp environment based on LispBM on top of ChibiOS, Zephyr, FreeRTOS or bare-metal then
  this is quite possible! I am sorry, though, that there is currently not very much documentation about how to get going with that.
  Looking at how the vesc_express integration works is one starting point as well as the x86 REPL mentioned below.</p>


<h2 id="the-lbm-repl">Getting started on linux</h2>
<p>There is an example REPL implementation that runs on X86 32 or 64bit in the <code>repl</code> directory. The REPL depends on libreadline.</p>
<p><strong>REPL Dependencies for 32Bit executable on 64Bit linux:</strong>
  <ul>
    <li> libreadline </li>
    <li> lib32readline </li>
    <li> gcc-multilib </li>
    <li> libpng </li>
  </ul>
      
<p>On Ubunty you can obtain the depencies by:
<br><br>
<code>sudo apt-get install gcc-multilib libreadline-dev lib32readline-dev libpng-dev libpng-dev:i386</code></p>

<p>Then issue command <code>make</code> in the repl directory.</p>

<h2 id="documentation">Documentation</h3>
<ul>
<li><a href="https://github.com/svenssonjoel/lispBM/blob/master/doc/lbmref.md">LispBM language reference</a>.</li>
<li><a href="https://github.com/svenssonjoel/lispBM/blob/master/doc/displayref.md">LispBM display library reference</a>.</li>
<li><a href="https://github.com/svenssonjoel/lispBM/blob/master/doc/runtimeref.md">LispBM runtime system library reference</a>.</li>
<li><a href="https://github.com/svenssonjoel/lispBM/blob/master/doc/gotchas.md">Gotchas and caveats</a>.</li>
<li>!OUTDATED! <a href="https://github.com/svenssonjoel/lispBM/tree/master/doc/manual">LispBM programming manual</a>.</li>
<li><a href=".cdocs/html/index.html">Implementation C code documents</a>.</li>
<li>There are <a href="https://youtube.com/playlist?list=PLtf_3TaqZoDOQqZcB9Yj-R1zS2DWDZ9q9">demonstrations on YouTube</a>.</li>
</ul>

<h3>Implement a lisp for microcontrollers</h3>

<p>The pages below outline steps of development that LispBM went through during 2020 - 2022.
  The information is quite outdated in relation to what LispBM has become since then but perhaps
  still contain something fun for someone else who wants to build a lisp from the ground up. </p>
<ul>
  <li> <a href="./pages/lispbm_evaluator/index.html"> Defunctionalizing a Continuation-Passing Style Evaluator </a> <br>
  <li> <a href="./pages/lispbm_compilation_1"> Towards a bytecode compiler for lispBM </a> <br>
  <li> <a href="./pages/lispbm_register_machine/index.html"> Evaluation of expressions using a register machine </a> (Edited june 23 2020: BugFix!) <br>
  <li> <a href="./pages/lispbm_memory_allocation/index.html"> An attempt to get a better grip on the memory usage </a> <br>
  <li> <a href="./pages/lispbm_towards_concurrency_2/index.html"> Spawn and Wait: Concurrency in lispBM part 2 </a> <br> 
  <li> <a href="./pages/lispbm_towards_concurrency/index.html"> Concurrency in lispBM part 1 </a> <br> 
  <li> <a href="./pages/lispbm_quasiquotation/index.html"> Quasiquotation in lispBM </a>  (Edited June 10 2020: BugFix) <br>
  <li> <a href="./pages/lispbm_short_circuit_logic/index.html"> Boolean operators with short-circuit behavior </a> <br>
  <li> <a href="./pages/lispbm_recursion_to_iteration/index.html"> Turning Recursion into Iteration using an Explicit Stack </a> <br>
  <li> <a href="./pages/lispbm_esp32_repl/index.html"> Implementation of a lispBM REPL for the ESP32 MCU </a> <br> 
  <li> <a href="./pages/lispbm_zephyros_repl/index.html"> Implementing a lispBM REPL in Zephyr OS </a> <br> 
  <li> <a href="./pages/lispbm_compressed_code/index.html"> Compression and parsing of compressed source code </a> <br> 
  <li> <a href="./pages/lispbm_garbage_collector/index.html"> Garbage collection in lispBM </a> <br> 
  <li> <a href="./pages/lispbm_chibios_repl/index.html"> Implementing a lispBM REPL in ChibiOs </a> <br> 
  <li> <a href="./pages/lispbm_fundamentals_and_extensions/index.html"> Fundamental operations and extensions in lispBM </a> <br>
  <li> <a href="./pages/lispbm_parsing_expressions/index.html"> Parsing of lispBM expressions </a> <br> 
  <li> <a href="./pages/lispbm_boxed_values/index.html"> A quick look at boxed values in lispBM </a> <br>
  <li> <a href="./pages/lispbm_evaluation_function/index.html"> More in-depth walkthrough of the lispBM evaluation function </a> <br>
  <li> <a href="./pages/lispbm_current_status/index.html"> Another lisp for microcontrollers (lispBM) </a> <br>
</ul>



<h2 id="editor-support">Editor support</h3>
<ul>
<li><a href="https://vesc-project.com/vesc_tool">vesc_tool</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=rasmus-soderhielm.lispbm-language-support">vscode support</a></li>
</ul>

<h2>LispBM Performance Evolution</h2>

<p>The performance of the LispBM implementation continuously evolves as we introduce new features and engage in optimization efforts. We work to enhance its efficiency for microcontrollers, such as the STM32F4 running at 168MHz.</p>

<p>Below, you can find performance charts illustrating LispBM's performance on a set of benchmarks:</p>

<img src="./images/benchresults.png" alt="Performance on a small set of benchmarks." />
<img src="./images/benchresults_log.png" alt="Performance (log scale) on a small set of benchmarks." />

<p>If you're interested in the technical details and benchmarks, you can explore our benchmark code here:</p>

<p><a href="./code/lbm_benchmarks_2022_02_27/index.html">Benchmarks 2022_02_27</a></p>

<h2>Other Lisp-Like Languages for Microcontrollers</h2>

<p>Explore a range of Lisp-like programming languages that are tailored for microcontroller development. These languages are designed to thrive in resource-constrained environments, making them ideal choices for embedded systems. Whether you're looking for a lightweight solution or a minimalist Lisp dialect, these languages offer unique approaches to microcontroller programming.</p>

<ul>
  <li>
    <strong>uLisp:</strong> A Lisp dialect specifically designed for microcontrollers. <a href="http://www.ulisp.com/">Learn more</a>
  </li>
  <li>
    <strong>FemtoLisp:</strong> A minimalistic Lisp designed for resource-constrained environments. <a href="https://github.com/JeffBezanson/femtolisp">Learn more</a>
  </li>
  <li>
    <strong>PicoLisp:</strong> A lightweight and minimalistic Lisp dialect for both server-side and embedded programming. <a href="https://picolisp.com/">Learn more</a>
  </li>
</ul>

<p>Is your favourite microcontroller lisp missing from this list? Please send the details in an email bo(dot)joel(dot)svensson(whirly-a)gmail(dot)com.
<br>
<hr>

</BODY>
</HTML>
